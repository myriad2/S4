I have tried several forks of the S4 in Ubuntu. However, some can't be compiled, while some compiled without errors yet give wrong results.
I notice that victor liu developed the S4 in msys2, so I tried to compile S4  in  msys2 env.
And I successfully installed S4lua and get exact results.
Essentially, I made some change to Makefile.Msys2 to include lua5.2 and remove -DLUA_BUILD_AS_DLL
I also write a simple script file to simplify the installation. You can run it in msys2 by type ".\install_S4_in_msys2.sh" in the shell

See testing.txt for some problems I found.





S4: Stanford Stratified Structure Solver (http://fan.group.stanford.edu/S4/)

A program for computing electromagnetic fields in periodic, layered
structures, developed by Victor Liu (victorliu@alumni.stanford.edu) of the
Fan group in the Stanford Electrical Engineering Department.

See the S4 manual, in doc/index.html, for a complete
description of the package and its user interface, as well as
installation instructions, the license and copyright, contact
addresses, and other important information.





